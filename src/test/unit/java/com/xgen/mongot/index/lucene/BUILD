load("//bazel/java:test.bzl", "mongot_java_unit_test_suite")

# gazelle:ignore
# gazelle:exclude codec

mongot_java_unit_test_suite(
    name = "lib",
    exclude_files = [
        "VectorIndexingAndQueryingTestHarness.java",
    ],
    resources = True,
    timeouts = {
        # Below tests deal with 10k vectors so take more time
        "TestVectorIndexingAndQueryingLargeScale.java": "moderate",
        # Background: https://jira.mongodb.org/browse/CLOUDP-246113
        "TestLuceneSearchBatchProducer.java": "moderate",
    },
    deps = [
        "commons-codec:commons-codec",
        "org.apache.commons:commons-lang3",
        "org.apache.lucene:lucene-analysis-common",
        "org.apache.lucene:lucene-core",
        "org.apache.lucene:lucene-facet",
        "org.apache.lucene:lucene-highlighter",
        "org.mongodb:mongodb-driver-core",
        "//src/main/java/com/xgen/mongot/config/util",
        "//src/main/java/com/xgen/mongot/cursor",
        "//src/main/java/com/xgen/mongot/cursor/batch",
        "//src/main/java/com/xgen/mongot/featureflag",
        "//src/main/java/com/xgen/mongot/featureflag/dynamic",
        "//src/main/java/com/xgen/mongot/index",
        "//src/main/java/com/xgen/mongot/index/analyzer",
        "//src/main/java/com/xgen/mongot/index/analyzer/definition",
        "//src/main/java/com/xgen/mongot/index/analyzer/wrapper",
        "//src/main/java/com/xgen/mongot/index/definition",
        "//src/main/java/com/xgen/mongot/index/ingestion",
        "//src/main/java/com/xgen/mongot/index/lucene",
        "//src/main/java/com/xgen/mongot/index/lucene/codec",
        "//src/main/java/com/xgen/mongot/index/lucene/config",
        "//src/main/java/com/xgen/mongot/index/lucene/directory",
        "//src/main/java/com/xgen/mongot/index/lucene/document",
        "//src/main/java/com/xgen/mongot/index/lucene/document/builder",
        "//src/main/java/com/xgen/mongot/index/lucene/explain/explainers",
        "//src/main/java/com/xgen/mongot/index/lucene/extension",
        "//src/main/java/com/xgen/mongot/index/lucene/field",
        "//src/main/java/com/xgen/mongot/index/lucene/quantization",
        "//src/main/java/com/xgen/mongot/index/lucene/query",
        "//src/main/java/com/xgen/mongot/index/lucene/query/context",
        "//src/main/java/com/xgen/mongot/index/lucene/query/custom",
        "//src/main/java/com/xgen/mongot/index/lucene/query/pushdown/project",
        "//src/main/java/com/xgen/mongot/index/lucene/query/range",
        "//src/main/java/com/xgen/mongot/index/lucene/query/sort",
        "//src/main/java/com/xgen/mongot/index/lucene/searcher",
        "//src/main/java/com/xgen/mongot/index/lucene/similarity",
        "//src/main/java/com/xgen/mongot/index/lucene/synonym",
        "//src/main/java/com/xgen/mongot/index/lucene/util",
        "//src/main/java/com/xgen/mongot/index/path/string",
        "//src/main/java/com/xgen/mongot/index/query",
        "//src/main/java/com/xgen/mongot/index/query/collectors",
        "//src/main/java/com/xgen/mongot/index/query/highlights",
        "//src/main/java/com/xgen/mongot/index/query/points",
        "//src/main/java/com/xgen/mongot/index/query/sort",
        "//src/main/java/com/xgen/mongot/index/status",
        "//src/main/java/com/xgen/mongot/index/version",
        "//src/main/java/com/xgen/mongot/metrics",
        "//src/main/java/com/xgen/mongot/monitor",
        "//src/main/java/com/xgen/mongot/replication/mongodb/common",
        "//src/main/java/com/xgen/mongot/util",
        "//src/main/java/com/xgen/mongot/util/bson",
        "//src/main/java/com/xgen/mongot/util/bson/parser",
        "//src/main/java/com/xgen/mongot/util/concurrent",
        "//src/main/java/com/xgen/testing",
        "//src/main/java/com/xgen/testing/fakes",
        "//src/main/java/com/xgen/testing/mongot/cursor/batch",
        "//src/main/java/com/xgen/testing/mongot/index",
        "//src/main/java/com/xgen/testing/mongot/index/analyzer",
        "//src/main/java/com/xgen/testing/mongot/index/analyzer/custom",
        "//src/main/java/com/xgen/testing/mongot/index/analyzer/definition",
        "//src/main/java/com/xgen/testing/mongot/index/definition",
        "//src/main/java/com/xgen/testing/mongot/index/lucene",
        "//src/main/java/com/xgen/testing/mongot/index/lucene/explain/information",
        "//src/main/java/com/xgen/testing/mongot/index/lucene/explain/tracing",
        "//src/main/java/com/xgen/testing/mongot/index/lucene/synonym",
        "//src/main/java/com/xgen/testing/mongot/index/path/string",
        "//src/main/java/com/xgen/testing/mongot/index/query",
        "//src/main/java/com/xgen/testing/mongot/index/query/collectors",
        "//src/main/java/com/xgen/testing/mongot/index/query/counts",
        "//src/main/java/com/xgen/testing/mongot/index/query/highlights",
        "//src/main/java/com/xgen/testing/mongot/index/query/operators",
        "//src/main/java/com/xgen/testing/mongot/index/query/scores",
        "//src/main/java/com/xgen/testing/mongot/index/query/sort",
        "//src/main/java/com/xgen/testing/mongot/mock/index",
        "@maven//:ch_qos_logback_logback_classic",
        "@maven//:ch_qos_logback_logback_core",
        "@maven//:io_opentelemetry_opentelemetry_context",
        "@maven//:org_apache_lucene_lucene_test_framework",
        "@maven//:org_hamcrest_hamcrest",
    ],
)
